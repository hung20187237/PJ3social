"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var _react = require('react');var v=(o=>(o.CONNECTED="connected",o.AUTHORIZATION_EXPIRED="authorization_expired",o.NOT_AUTHORIZED="not_authorized",o.UNKNOWN="unknown",o))(v||{}),h= exports.LoginStatus =v;var w=class extends Error{constructor(t,r,o){super(t);this.code=r,this.type=o}};var j={domain:"connect.facebook.net",version:"v14.0",cookie:!1,status:!1,xfbml:!1,language:"en_US",frictionlessRequests:!1,debug:!1,chatSupport:!1,autoLogAppEvents:!0,lazy:!1},x=class{constructor(e){if(!e.appId)throw new Error("You need to set appId");this.options={...j,...e},this.options.lazy||this.init()}getAppId(){return this.options.appId}getFB(){return window.FB}async init(){return this.loadingPromise?this.loadingPromise:(this.loadingPromise=new Promise(e=>{let{domain:t,language:r,debug:o,chatSupport:n,...s}=this.options;if(window.fbAsyncInit=()=>{window.FB.init({appId:s.appId,version:s.version,cookie:s.cookie,status:s.status,xfbml:s.xfbml,frictionlessRequests:s.frictionlessRequests}),e(this)},window.document.getElementById("facebook-jssdk"))return e(window.FB);let a=window.document.createElement("script");a.id="facebook-jssdk",a.async=!0,a.defer=!0,a.crossOrigin="anonymous",a.src=`https://${t}/${r}/sdk${n?"/xfbml.customerchat":""}${o?"/debug":""}.js`,window.document.body.appendChild(a)}),this.loadingPromise)}async process(e,t=[],r=[]){let o=await this.init();return new Promise((n,s)=>{o[e](...t,a=>{if(a)if("error"in a){let{code:d,type:p,message:u}=a.error;s(new w(u,d,p))}else n(a);else{if(e==="ui")return;s(new Error("Response is undefined"))}},...r)})}async ui(e){return this.process("ui",[e])}async api(e,t="get",r={}){return this.process("api",[e,t,r])}async login(e){let{scope:t,authType:r=[],returnScopes:o,rerequest:n,reauthorize:s}=e,a={scope:t};return o&&(a.return_scopes=!0),n&&r.push("rerequest"),s&&r.push("reauthenticate"),r.length&&(a.auth_type=r.join(",")),this.process("login",[],[a])}async logout(){return this.process("logout")}async getLoginStatus(){return this.process("getLoginStatus")}async getAuthResponse(){return this.process("getAuthResponse")}async getTokenDetail(e){if((e==null?void 0:e.status)===h.CONNECTED)return e.authResponse;let t=await this.getLoginStatus();if(t.status===h.CONNECTED)return t.authResponse;throw new Error("Token is undefined")}async getProfile(e){return this.api("/me","get",e)}async getTokenDetailWithProfile(e,t){let r=await this.getTokenDetail(t);return{profile:await this.getProfile(e),tokenDetail:r}}async getToken(){return(await this.getTokenDetail()).accessToken}async getUserId(){return(await this.getTokenDetail()).userID}async sendInvite(e,t){return this.ui({to:e,method:"apprequests",...t})}async postAction(e,t,r,o,n){let s=`/me/${e}:${t}?${r}=${encodeURIComponent(o)}`;return n===!0&&(s+="&no_feed_story=true"),this.api(s,"post")}async getPermissions(){return(await this.api("/me/permissions")).data}async hasPermissions(e){let t=await this.getPermissions();return e.filter(o=>!!t.find(s=>{let{permission:a,status:d}=s;return d==="granted"&&a===o})).length===e.length}async subscribe(e,t){await this.init(),this.getFB().Event.subscribe(e,t)}async unsubscribe(e,t){await this.init(),this.getFB().Event.unsubscribe(e,t)}async parse(e){await this.init(),typeof e>"u"?this.getFB().XFBML.parse():this.getFB().XFBML.parse(e)}async getRequests(){return this.api("/me/apprequests")}async removeRequest(e){return this.api(e,"delete")}async setAutoGrow(){await this.init(),this.getFB().Canvas.setAutoGrow()}async paySimple(e,t=1){return this.ui({method:"pay",action:"purchaseitem",product:e,quantity:t})}async pay(e,t){return this.ui({method:"pay",action:"purchaseitem",product:e,...t})}};var P=_react.createContext.call(void 0, void 0);var y;function _(i){let{children:e,...t}=i,[r,o]=_react.useState.call(void 0, !0),[n,s]=_react.useState.call(void 0, !1),[a,d]=_react.useState.call(void 0, );async function p(){try{return y?y.init():(s(!1),o(!0),y=new x(t),await y.init(),s(!0),y)}catch(l){d(l)}finally{o(!1)}}async function u(l){let b=await p();b&&await b.parse(l)}_react.useEffect.call(void 0, ()=>{let{lazy:l}=t;l||p()},[]);let c={isLoading:r,error:a,init:p,api:n?y:void 0,parse:u};return React.createElement(P.Provider,{value:c},e)}function m(i={}){let{lazy:e=!1}=i,t=_react.useContext.call(void 0, P);if(!t)throw new Error("useFacebook must be used within a FacebookProvider");return _react.useEffect.call(void 0, ()=>{e||t.init()},[e]),t}var re=_react.memo.call(void 0, _react.forwardRef.call(void 0, (i,e)=>{let{inline:t,children:r,...o}=i;return React.createElement(t?"span":"div",{...o,ref:e},r)}));function ne(i){let{children:e,inline:t,...r}=i,{parse:o}=m(),[n,s]=_react.useState.call(void 0, null),a=_react.useCallback.call(void 0, d=>{s(d)},[]);return _react.useEffect.call(void 0, ()=>{n&&o(n)},[n]),React.createElement(re,{inline:t,...r,ref:a},e)}var f=_react.memo.call(void 0, ne);var _canusedom = require('can-use-dom'); var _canusedom2 = _interopRequireDefault(_canusedom);function g(){return _canusedom2.default?window.location.href:"https://www.facebook.com"}function de(i,e){let{href:t=g(),layout:r,colorScheme:o,action:n,showFaces:s,share:a,children:d,width:p,size:u,kidDirectedSite:c,referral:l,...b}=i;return console.log("RENDERING like"),React.createElement(f,null,React.createElement("div",{className:"fb-like","data-ref":l,"data-href":t,"data-layout":r,"data-colorscheme":o,"data-action":n,"data-show-faces":s,"data-share":a,"data-width":p,"data-size":u,"data-kid-directed-site":c,...b,ref:e},d))}var pe=_react.memo.call(void 0, _react.forwardRef.call(void 0, de));function N(i){if(!i)return i;let e={};return Object.keys(i).forEach(t=>{let r=i[t];r!==void 0&&(e[t]=r)}),e}function E(){let{init:i}=m(),[e,t]=_react.useState.call(void 0, !1),[r,o]=_react.useState.call(void 0, void 0);async function n(s){try{let{href:a,display:d,hashtag:p,redirectUri:u,...c}=s;o(void 0),t(!0);let l=await i();if(!l)throw new Error("Facebook API is not initialized");return l.ui(N({method:"share",href:a,display:d,app_id:l.getAppId(),hashtag:p,redirect_uri:u,...c}))}catch(a){o(a)}finally{t(!1)}}return{isLoading:e,error:r,share:n}}function U(i){let{children:e,asChild:t="button",disabled:r,href:o,display:n,hashtag:s,redirectUri:a,...d}=i,{isLoading:p,share:u}=E();function c(){p||u({href:o,display:n,hashtag:s,redirectUri:a})}return React.createElement(t,{onClick:c,disabled:p,...d},e)}function fe(i,e){let{style:t,href:r=g(),tabs:o,hideCover:n,width:s,height:a,showFacepile:d,hideCTA:p,smallHeader:u,adaptContainerWidth:c,children:l,...b}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-page",style:t,"data-tabs":o,"data-hide-cover":n,"data-show-facepile":d,"data-hide-cta":p,"data-href":r,"data-small-header":u,"data-adapt-container-width":c,"data-height":a,"data-width":s,...b,ref:e},l))}var le=_react.memo.call(void 0, _react.forwardRef.call(void 0, fe));function R(){let{api:i,isLoading:e}=m(),[t,r]=_react.useState.call(void 0, void 0),[o,n]=_react.useState.call(void 0, !1),[s,a]=_react.useState.call(void 0, );async function d(p,u){try{if(!i)throw new Error("Facebook API is not initialized");n(!0);let c=await i.login(p);if(c.status!==h.CONNECTED)throw new Error("Unauthorized user");return a(c),u==null||u(c),c}catch(c){throw r(c),c}finally{n(!1)}}return{login:d,error:t,isLoading:e||o,status:s==null?void 0:s.status}}function M(i){let{children:e,asChild:t="button",disabled:r,scope:o,returnScopes:n,authType:s,rerequest:a,reauthorize:d,onError:p,onSuccess:u,...c}=i,{isLoading:l,login:b}=R();async function X(){try{if(l)return;let T=await b({scope:o,returnScopes:n,authType:s,rerequest:a,reauthorize:d});u==null||u(T)}catch(T){p==null||p(T)}}return React.createElement(t,{onClick:X,disabled:l,...c},e)}function he(i,e){let{href:t,width:r,showText:o,children:n,...s}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-post","data-href":t,"data-width":r,"data-show-text":o,...s,ref:e},n))}var be=_react.memo.call(void 0, _react.forwardRef.call(void 0, he));function xe(i,e){let{href:t,width:r,showText:o,allowFullScreen:n,autoPlay:s,showCaptions:a,children:d,...p}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-video","data-href":t,"data-width":r,"data-show-text":o,"data-show-captions":a,"data-autoplay":s,"data-allowfullscreen":n,...p,ref:e},d))}var Pe=_react.memo.call(void 0, _react.forwardRef.call(void 0, xe));function Le(i,e){let{colorScheme:t,href:r=g(),numPosts:o,orderBy:n,width:s,children:a,mobile:d,...p}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-comments","data-colorscheme":t,"data-numposts":o,"data-href":r,"data-order-by":n,"data-width":s,"data-skin":t,"data-mobile":d,...p,ref:e},a))}var Ce=_react.memo.call(void 0, _react.forwardRef.call(void 0, Le));function Ne(i,e){let{href:t=g(),children:r,...o}=i;return React.createElement(f,{inline:!0},React.createElement("span",{className:"fb-comments-count","data-href":t,...o,ref:e},r))}var Ie=_react.memo.call(void 0, _react.forwardRef.call(void 0, Ne));function Oe(i,e){let{style:t,href:r=g(),width:o,showSocialContext:n,showMetaData:s,children:a,skin:d,...p}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-group",style:t,"data-href":r,"data-width":o,"data-show-social-context":n,"data-show-metadata":s,"data-skin":d,...p,ref:e},a))}var ve=_react.memo.call(void 0, _react.forwardRef.call(void 0, Oe));function De(i,e){let{children:t,pageId:r,themeColor:o,loggedInGreeting:n,loggedOutGreeting:s,dataRef:a,greetingDialogDisplay:d,greetingDialogDelay:p,minimized:u,...c}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-customerchat",page_id:r,theme_color:o,logged_in_greeting:n,logged_out_greeting:s,greeting_dialog_display:d,greeting_dialog_delay:p,"data-ref":a,minimized:u,...c,ref:e},t))}var Ue=_react.memo.call(void 0, _react.forwardRef.call(void 0, De));function ze(i,e){let{color:t,messengerAppId:r,pageId:o,children:n,size:s,dataRef:a,...d}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-messengermessageus",messenger_app_id:r,page_id:o,"data-color":t,"data-size":s,"data-ref":a,...d,ref:e},n))}var Be=_react.memo.call(void 0, _react.forwardRef.call(void 0, ze));function $e(i,e){let{origin:t,prechecked:r,allowLogin:o,userRef:n,messengerAppId:s,pageId:a,children:d,size:p,centerAlign:u,skin:c,...l}=i;return React.createElement(f,null,React.createElement("div",{className:"fb-messenger-checkbox",messenger_app_id:s,page_id:a,size:p,origin:t,user_ref:n,prechecked:r,allow_login:o,skin:c,center_align:u,...l,ref:e},d))}var Ve=_react.memo.call(void 0, _react.forwardRef.call(void 0, $e));function je(i,e){let{color:t,messengerAppId:r,pageId:o,children:n,dataRef:s,size:a,enforceLogin:d,...p}=this.props;return React.createElement(f,null,React.createElement("div",{className:"fb-send-to-messenger",messenger_app_id:r,page_id:o,"data-color":t,"data-size":a,"data-ref":s,enforce_login:d,...p,ref:e},n))}var Ke=_react.memo.call(void 0, _react.forwardRef.call(void 0, je));var G=(t=>(t.SMALL="small",t.LARGE="large",t))(G||{}),Je= exports.LikeSize =G;var z=(o=>(o.STANDARD="standard",o.BUTTON_COUNT="button_count",o.BUTTON="button",o.BOX_COUNT="box_count",o))(z||{}),Ze= exports.LikeLayout =z;var B=(t=>(t.LIGHT="light",t.DARK="dark",t))(B||{}),Ye= exports.ColorScheme =B;var H=(t=>(t.LIKE="like",t.RECOMMEND="recommend",t))(H||{}),Qe= exports.LikeAction =H;var q=(r=>(r.SOCIAL="social",r.REVERSE_TIME="reverse_time",r.TIME="time",r))(q||{}),et= exports.CommentsOrderBy =q;var $=(n=>(n.SMALL="small",n.MEDIUM="medium",n.STANDARD="standard",n.LARGE="large",n.XLARGE="xlarge",n))($||{}),tt= exports.MessengerSize =$;var V=(t=>(t.BLUE="blue",t.WHITE="white",t))(V||{}),ot= exports.MessengerColor =V;var rt=["id","first_name","last_name","middle_name","name","name_format","picture","short_name","email"];function L(i,e){let[t,r]=_react.useState.call(void 0, void 0),{init:o}=m(),n=_react.useCallback.call(void 0, d=>{r(d),e==null||e(t)},[e]),s=_react.useCallback.call(void 0, async()=>{let d=await o();d&&await d.subscribe(i,n)},[i,n]),a=_react.useCallback.call(void 0, async()=>{let d=await o();d&&await d.unsubscribe(i,n)},[i,n]);return _react.useEffect.call(void 0, ()=>(s(),()=>{a()}),[s]),t}function C(){let{init:i}=m(),[e,t]=_react.useState.call(void 0, !0),[r,o]=_react.useState.call(void 0, void 0),[n,s]=_react.useState.call(void 0, h.UNKNOWN),a=_react.useCallback.call(void 0, p=>{s(p.status)},[]);L("auth.statusChange",a);async function d(){try{t(!0);let p=await i();if(!p)throw new Error("Facebook API is not initialized");let{status:u}=await p.getLoginStatus();s(u)}catch(p){o(p)}finally{t(!1)}}return _react.useEffect.call(void 0, ()=>{d()},[]),{isLoading:e,error:r,status:n}}function W(i){let{init:e}=m(),{status:t}=C(),[r,o]=_react.useState.call(void 0, !0),[n,s]=_react.useState.call(void 0, void 0),[a,d]=_react.useState.call(void 0, void 0);async function p(){try{d(void 0),o(!0);let u=await e();if(!u)throw new Error("Facebook API is not initialized");if(t===h.CONNECTED){let c=await u.getProfile({fields:i});s(c)}}catch(u){d(u)}finally{o(!1)}}return _react.useEffect.call(void 0, ()=>{p()},[t,i]),{isLoading:r,error:a,profile:n}}exports.ColorScheme = Ye; exports.Comments = Ce; exports.CommentsCount = Ie; exports.CommentsOrderBy = et; exports.CustomChat = Ue; exports.EmbeddedPost = be; exports.EmbeddedVideo = Pe; exports.FacebookContext = P; exports.FacebookProvider = _; exports.Fields = rt; exports.Group = ve; exports.Like = pe; exports.LikeAction = Qe; exports.LikeLayout = Ze; exports.LikeSize = Je; exports.LoginButto = M; exports.LoginStatus = h; exports.MessageUs = Be; exports.MessengerCheckbox = Ve; exports.MessengerColor = ot; exports.MessengerSize = tt; exports.Page = le; exports.Parser = f; exports.SendToMessenger = Ke; exports.ShareButton = U; exports.useFacebook = m; exports.useLogin = R; exports.useLoginStatus = C; exports.useProfile = W; exports.useShare = E; exports.useSubscribe = L;
//# sourceMappingURL=index.js.map